# Config for the dnsmasq test container only (docker-compose.test.yml).
# DNS + DHCP: forwards DNS to Cloudflare/Google with caching; hands out DHCP on testnet.
# Uses same testdata layout so app and dnsmasq share hosts, dhcp.conf, leases.
port=53
interface=eth0
bind-interfaces

# Upstream DNS (forward queries not in cache/hosts to these)
server=1.1.1.1
server=8.8.8.8
no-resolv
# Caching
cache-size=1000
# Typical options
domain-needed
bogus-priv

# DHCP
dhcp-range=172.28.0.10,172.28.0.50,255.255.255.0,12h
dhcp-leasefile=/data/leases
# Additional config and hosts
conf-dir=/data/dnsmasq.d
addn-hosts=/data/hosts

# Log to file so the harness can show real logs (LogsCommand tails this)
log-facility=/data/dnsmasq.log
log-queries