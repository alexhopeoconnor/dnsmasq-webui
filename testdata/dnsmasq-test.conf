# Config for the dnsmasq test container only (docker-compose.test.yml).
# DNS + DHCP: forwards DNS to Cloudflare/Google with caching; hands out DHCP on testnet.
# Uses same testdata layout so app and dnsmasq share hosts, dhcp.conf, leases.
# Richer config so UI shows multi-value lists (server, addn-hosts, address, dhcp-range) and readonly sources.
port=53
interface=eth0
listen-address=172.28.0.2
bind-interfaces

# Upstream DNS (forward queries not in cache/hosts to these)
server=1.1.1.1
server=8.8.8.8
no-resolv
# Caching
cache-size=1000
# Typical options
domain-needed
bogus-priv

# Local overrides (multi-value: address=)
address=/local.example/127.0.0.1
address=/test.lan/172.28.0.1

# DHCP
dhcp-range=172.28.0.10,172.28.0.50,255.255.255.0,12h
dhcp-leasefile=/data/leases
# Additional config and hosts (multi-value: addn-hosts)
conf-dir=/data/dnsmasq.d
addn-hosts=/data/hosts
addn-hosts=/data/hosts.extra

# Log to file so the harness can show real logs (LogsCommand tails this)
log-facility=/data/dnsmasq.log
log-queries

conf-file=zz-dnsmasq-webui.conf
